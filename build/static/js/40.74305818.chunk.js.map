{"version":3,"sources":["routes/Other/SpringText/index.js"],"names":["SpringText","createText","_this","Object","C_Users_Administrator_Desktop_react_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__","_this2","COLOR","MESSAGE","FONT_SIZE","AMOUNT","SIZE","INITIAL_DISPLACEMENT","INITIAL_VELOCITY","VELOCITY_RETENTION","SETTLE_SPEED","FLEE_SPEED","FLEE_DISTANCE","SCATTER_VELOCITY","CLEAR_RADIUS","Math","round","MOVED_O","Array","apply","map","canvas","document","getElementById","ctx","getContext","offsetX","getBoundingClientRect","left","POINTS","MOVED","moved_length","MOUSE","x","y","Point","r","g","b","a","angle","random","this","dest_x","dest_y","original_r","original_g","original_a","lastx","lasty","width","height","velx","cos","vely","sin","target_x","target_y","moved","getX","getY","fleeFrom","settleTo","scatter","unit","unitVecTo","vel","checkMove","abs","simpleMove","move","distanceTo","dx","dy","sqrt","d","inMotion","clear","clearRect","draw","fillStyle","beginPath","arc","PI","fill","resizeCanvas","clientWidth","clientHeight","adjustText","textBaseline","textAlign","font","fillText","textWidth","measureText","minX","minY","data","getImageData","isBlank","i","length","count","curr","num","w","floor","push","animate","update","myReq","window","requestAnimationFrame","addEventListener","event","clientX","clientY","antd_es_notification__WEBPACK_IMPORTED_MODULE_1__","open","description","style","marginTop","cancelAnimationFrame","destroy","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","styles","bg","id","React","Component","position","top"],"mappings":"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","file":"static/js/40.74305818.chunk.js","sourcesContent":["import React from 'react'\nimport {notification} from 'antd'\n\nclass SpringText extends React.Component{\n  componentDidMount(){\n    this.createText()\n    notification.open({\n      description: '鼠标移入到文字上，或者鼠标点击屏幕',\n      style:{marginTop:64}\n    });\n\n  }\n  componentWillUnmount(){\n    window.cancelAnimationFrame(this.myReq)\n    //绑定到DOM、window上的事件需要自己手动销毁吗\n    notification.destroy()\n  }\n  createText =()=> {\n    const _this = this\n    // WRITTEN BY TRUMAN HEBERLE\n    const COLOR = \"black\"\n    const MESSAGE = '很酷炫的文字效果'\n\n    const FONT_SIZE = 100;\n    const AMOUNT = 3000;\n    const CLEAR_AMOUNT = 2;\n    const SIZE = 2;\n    const INITIAL_DISPLACEMENT = 100;\n    const INITIAL_VELOCITY = 5;\n    const VELOCITY_RETENTION = 0.95;\n    const SETTLE_SPEED = 0.01;\n    const FLEE_SPEED = 0.1;\n    const FLEE_DISTANCE = 50;\n    const FLEE = true;\n    const SCATTER_VELOCITY = 30;\n    const SCATTER = true;\n    \n// MAIN\n    const CLEAR_RADIUS = Math.round(CLEAR_AMOUNT + SIZE);\n    const MOVED_O = Array.apply(null, Array(AMOUNT)).map(function () {return null;});\n\n    const canvas = document.getElementById(\"spring-text\");\n    const ctx = canvas.getContext(\"2d\");\n    var offsetX = canvas.getBoundingClientRect().left\n    var POINTS = [];\n    var MOVED = [];\n    var moved_length = 0;\n    var MOUSE = {\n      x: 0,\n      y: 0\n    }\n\n    function Point(x,y,r,g,b,a) {\n      var angle = Math.random() * 6.28;\n      this.dest_x = x;\n      this.dest_y = y;\n      this.original_r = r;\n      this.original_g = g;\n      this.original_a = a;\n      this.lastx = 0;\n      this.lasty = 0;\n      this.x = canvas.width/2 - x + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n      this.y = canvas.height/2 - y + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n      this.velx = INITIAL_VELOCITY * Math.cos(angle);\n      this.vely = INITIAL_VELOCITY * Math.sin(angle);\n      this.target_x = canvas.width/2 - x;\n      this.target_y = canvas.height/2 - y;\n      this.r = r;\n      this.g = g;\n      this.b = b;\n      this.a = a;\n      this.moved = false;\n      MOVED[moved_length] = this;\n      moved_length++;\n\n      this.getX = function() {\n        return this.x;\n      }\n\n      this.getY = function() {\n        return this.y;\n      }\n\n      this.fleeFrom = function(x, y) {\n        this.velx -= ((MOUSE.x - this.x) * FLEE_SPEED);\n        this.vely -= ((MOUSE.y - this.y) * FLEE_SPEED);\n      }\n\n      this.settleTo = function(x, y) {\n        this.velx = VELOCITY_RETENTION * (this.velx + (this.target_x - this.x) * SETTLE_SPEED);\n        this.vely = VELOCITY_RETENTION * (this.vely + (this.target_y - this.y) * SETTLE_SPEED);\n      }\n\n      this.scatter = function() {\n        var unit = this.unitVecTo(MOUSE.x, MOUSE.y);\n        var vel = SCATTER_VELOCITY * (0.5 + Math.random() / 2);\n        this.velx = -unit.x * vel;\n        this.vely = -unit.y * vel;\n      }\n\n      this.checkMove = function() {\n        this.moved = (!Math.abs(Math.round(this.target_x - this.x)) == 0 || !Math.abs(Math.round(this.target_y - this.y)) == 0 || !Math.abs(Math.round(this.velx)) == 0 || !Math.abs(Math.round(this.vely)) == 0);\n      }\n\n      this.simpleMove = function() {\n        this.checkMove();\n        if (!this.moved) {\n          return;\n        }\n\n        this.lastx = this.x;\n        this.lasty = this.y;\n        this.x += this.velx;\n        this.y += this.vely;\n        MOVED[moved_length] = this;\n        moved_length++;\n      }\n\n      this.move = function() {\n        if (this.distanceTo(MOUSE.x, MOUSE.y) <= FLEE_DISTANCE) {\n          this.fleeFrom(MOUSE.x, MOUSE.y);\n        }\n        else {\n          this.settleTo(this.target_x, this.target_y);\n        }\n        this.simpleMove();\n      }\n\n      this.distanceTo = function(x, y) {\n        var dx = x - this.x;\n        var dy = y - this.y;\n        return Math.sqrt(dx*dx+ dy*dy);\n      }\n\n      this.unitVecTo = function(x, y) {\n        var dx = x - this.x;\n        var dy = y - this.y;\n        var d = Math.sqrt(dx*dx + dy*dy);\n        return {\n          x: dx / d,\n          y: dy / d\n        };\n      }\n\n      this.inMotion = function() {\n        return this.moved;\n      }\n\n      this.clear = function() {\n        ctx.clearRect(this.lastx-CLEAR_RADIUS,this.lasty-CLEAR_RADIUS,CLEAR_RADIUS*2,CLEAR_RADIUS*2);\n      }\n\n      this.draw = function() {\n        ctx.fillStyle = \"rgba(\"+this.r+\",\"+this.g+\",\"+this.b+\",\"+this.a+\")\";\n        ctx.beginPath();\n        ctx.arc(this.x,this.y,SIZE,0,2*Math.PI);\n        ctx.fill();\n      }\n    }\n\n    window.addEventListener(\"resize\", function() {\n      resizeCanvas()\n      adjustText()\n    });\n\n    if (FLEE) {\n      canvas.addEventListener(\"mousemove\", function(event) {\n        MOUSE.x = event.clientX -offsetX;\n        MOUSE.y = event.clientY -66;\n      });\n    }\n\n    if (SCATTER) {\n        canvas.addEventListener(\"click\", function(event) {\n        MOUSE.x = event.clientX-offsetX;\n        MOUSE.y = event.clientY -66 ;\n        for (var i=0; i<POINTS.length; i++) {\n          POINTS[i].scatter();\n        }\n      });\n    }\n\n    function resizeCanvas() {\n      canvas.width  = canvas.clientWidth;\n      canvas.height = canvas.clientHeight;\n    }\n\n    function adjustText() {\n      ctx.fillStyle = COLOR;\n      ctx.textBaseline = \"middle\";\n      ctx.textAlign = \"center\";\n      ctx.font = FONT_SIZE + \"px Arial\";\n      ctx.fillText(MESSAGE, canvas.width/2, canvas.height/2);\n      var textWidth = ctx.measureText(MESSAGE).width;\n      if (textWidth == 0) {\n        return;\n      }\n      var minX = canvas.width/2 - textWidth/2;\n      var minY = canvas.height/2 - FONT_SIZE/2;\n      var data = ctx.getImageData(minX, minY, textWidth, FONT_SIZE).data;\n      ctx.clearRect(0,0,canvas.width,canvas.height);\n      var isBlank = true;\n      for (var i=0; i<data.length; i++) {\n        if (data[i] != 0) {\n          isBlank = false;\n          break;\n        }\n      }\n\n      if (!isBlank) {\n        var count = 0;\n        var curr = 0;\n        var num = 0;\n        var x = 0;\n        var y = 0;\n        var w = Math.floor(textWidth);\n        POINTS = [];\n        while (count < AMOUNT) {\n          while (curr == 0) {\n            num = Math.floor(Math.random() * data.length);\n            curr = data[num];\n          }\n          num = Math.floor(num / 4);\n          x = w/2 - num%w;\n          y = FONT_SIZE/2 - Math.floor(num/w);\n          POINTS.push(new Point(x,y,data[num*4],data[num*4 + 1],data[num*4 + 2],data[num*4 + 3]));\n          curr = 0;\n          count++;\n        }\n      }\n    }\n\n    function init() {\n      resizeCanvas()\n      adjustText()\n      animate()\n      // window.requestAnimationFrame(animate);\n    }\n\n    function animate() {\n      update();\n      draw();\n    }\n\n    function update() {\n      for (var i=0; i<POINTS.length; i++) {\n        POINTS[i].move()\n      }\n    }\n\n    function draw() {\n      for (var i=0; i<moved_length; i++) {\n        MOVED[i].clear();\n      }\n      MOVED = MOVED_O;\n      moved_length = 0;\n\n      for (var i=0; i<POINTS.length; i++) {\n        POINTS[i].draw()\n      }\n\n      _this.myReq = window.requestAnimationFrame(animate);\n    }\n\n    init();\n  }\n  render(){\n    return (\n      <div style={styles.bg}>\n        <canvas id=\"spring-text\" style={styles.bg}/>\n      </div>\n    )\n  }\n}\nconst styles = {\n  bg: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 'calc(100vh - 64px)',\n  },\n}\nexport default SpringText"],"sourceRoot":""}